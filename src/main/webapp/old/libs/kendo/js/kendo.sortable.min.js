/*
* Kendo UI Complete v2012.3.1315 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(e,r){var t=window.kendo,n=e.proxy,a="dir",i="asc",o="single",l="field",d="desc",s=".kendoSortable",c=".k-link",f="aria-sort",k=t.ui.Widget,u=k.extend({init:function(e,r){var t,a=this;k.fn.init.call(a,e,r),a._refreshHandler=n(a.refresh,a),a.dataSource=a.options.dataSource.bind("change",a._refreshHandler),t=a.element.find(c),t[0]||(t=a.element.wrapInner('<a class="k-link" href="#"/>').find(c)),a.link=t,a.element.on("click"+s,n(a._click,a))},options:{name:"Sortable",mode:o,allowUnsort:!0},destroy:function(){var e=this;k.fn.destroy.call(e),e.element.off(s),e.dataSource.unbind("change",e._refreshHandler)},refresh:function(){var r,n,o,s,c=this,k=c.dataSource.sort()||[],u=c.element,p=u.attr(t.attr(l));for(u.removeAttr(t.attr(a)),u.removeAttr(f),r=0,n=k.length;n>r;r++)o=k[r],p==o.field&&u.attr(t.attr(a),o.dir);s=u.attr(t.attr(a)),u.find(".k-i-arrow-n,.k-i-arrow-s").remove(),s===i?(e('<span class="k-icon k-i-arrow-n" />').appendTo(c.link),u.attr(f,"ascending")):s===d&&(e('<span class="k-icon k-i-arrow-s" />').appendTo(c.link),u.attr(f,"descending"))},_click:function(e){var n,s,c=this,f=c.element,k=f.attr(t.attr(l)),u=f.attr(t.attr(a)),p=c.options,h=c.dataSource.sort()||[];if(u=u===i?d:u===d&&p.allowUnsort?r:i,p.mode===o)h=[{field:k,dir:u}];else if("multiple"===p.mode){for(n=0,s=h.length;s>n;n++)if(h[n].field===k){h.splice(n,1);break}h.push({field:k,dir:u})}e.preventDefault(),c.dataSource.sort(h)}});t.ui.plugin(u)})(window.kendo.jQuery);